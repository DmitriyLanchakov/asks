<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>asks &#8212; asks 0.0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="asks - An overview of the functions and kw/argumetns." href="overview-of-funcs-and-args.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="asks">
<h1>asks<a class="headerlink" href="#asks" title="Permalink to this headline">¶</a></h1>
<div class="section" id="contents">
<h2>Contents:<a class="headerlink" href="#contents" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="overview-of-funcs-and-args.html">asks - An overview of the functions and kw/argumetns.</a><ul>
<li class="toctree-l2"><a class="reference internal" href="overview-of-funcs-and-args.html#general-http-methods">General HTTP methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview-of-funcs-and-args.html#passing-queries">Passing Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview-of-funcs-and-args.html#custom-headers">Custom Headers</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview-of-funcs-and-args.html#sending-json">Sending JSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview-of-funcs-and-args.html#sending-files">Sending Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview-of-funcs-and-args.html#sending-cookies">Sending Cookies</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview-of-funcs-and-args.html#cookie-interactions">Cookie Interactions</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview-of-funcs-and-args.html#set-encoding">Set Encoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview-of-funcs-and-args.html#limiting-redirects">Limiting Redirects</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview-of-funcs-and-args.html#set-timeout">Set Timeout</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview-of-funcs-and-args.html#authing">Authing</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview-of-funcs-and-args.html#streaming-response-data">Streaming response data</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview-of-funcs-and-args.html#callbacks">Callbacks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="a-look-at-sessions.html">asks - A Look at Sessions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="a-look-at-sessions.html#hsession">HSession</a></li>
<li class="toctree-l2"><a class="reference internal" href="a-look-at-sessions.html#dsession">DSession</a></li>
<li class="toctree-l2"><a class="reference internal" href="a-look-at-sessions.html#stateful-sessions">Stateful Sessions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="the-response-object.html">asks - The Response Object</a><ul>
<li class="toctree-l2"><a class="reference internal" href="the-response-object.html#encoding">Encoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="the-response-object.html#status-line">Status Line</a></li>
<li class="toctree-l2"><a class="reference internal" href="the-response-object.html#headers">Headers</a></li>
<li class="toctree-l2"><a class="reference internal" href="the-response-object.html#json">JSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="the-response-object.html#view-body-text-decoded-content-barebones">View Body (text decoded, content, barebones)</a></li>
<li class="toctree-l2"><a class="reference internal" href="the-response-object.html#cookies">Cookies</a></li>
<li class="toctree-l2"><a class="reference internal" href="the-response-object.html#response-history">Response History</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="idioms.html">asks - Useful idioms and tricks.</a><ul>
<li class="toctree-l2"><a class="reference internal" href="idioms.html#sanely-making-many-requests-with-semaphores">Sanely making many requests (with semaphores)</a></li>
<li class="toctree-l2"><a class="reference internal" href="idioms.html#maintaining-order">Maintaining Order</a></li>
<li class="toctree-l2"><a class="reference internal" href="idioms.html#handling-response-body-content-downloads-etc">Handling response body content (downloads etc.)</a></li>
<li class="toctree-l2"><a class="reference internal" href="idioms.html#resending-an-asks-cookie">Resending an asks.Cookie</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="what-is-asks">
<h2>What is asks?<a class="headerlink" href="#what-is-asks" title="Permalink to this headline">¶</a></h2>
<p>asks is an async http lib that can best be described as an effort to bring the same level of usable abstraction that requests offers synchronous python, to asynchronous python programming. Ideal for api interactions, webscraping etc.</p>
<p>It is important to note that the code examples in this documentation are to showcase asks, and not curio. In real code, it would be benificial to use things like curio&#8217;s taskgroups and other neat tools to manage your requests. Here&#8217;s a link to curio&#8217;s docs for refrence:</p>
<p><a class="reference external" href="http://curio.rtfd.io/">http://curio.rtfd.io/</a></p>
<p>(The most useful thing to know when dealing with asks is a BoundedSemaphore, <a class="reference external" href="http://asks.readthedocs.io/en/latest/idioms.html#sanely-making-many-requests-with-semaphores">for which I&#8217;ve written an example with asks</a> )</p>
</div>
<div class="section" id="installation">
<h2>Installation:<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>asks requires <a class="reference external" href="www.python.org">Python 3.6</a> .</p>
<p>The easiest way to install asks is to pip the master git repo:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">git</span><span class="o">+</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">theelous3</span><span class="o">/</span><span class="n">asks</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>asks was built for use with <a class="reference external" href="https://github.com/dabeaz/curio">Curio</a>.
Internally asks uses the excellent <a class="reference external" href="https://github.com/njsmith/h11">h11</a>.</p>
</div>
<div class="section" id="a-dirty-little-example">
<h2>A dirty little example:<a class="headerlink" href="#a-dirty-little-example" title="Permalink to this headline">¶</a></h2>
<p>Here&#8217;s how to grab a single request and print it&#8217;s content:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># single_get.py</span>
<span class="kn">import</span> <span class="nn">asks</span>
<span class="kn">import</span> <span class="nn">curio</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">grabber</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="n">r</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asks</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>

<span class="n">curio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">grabber</span><span class="p">(</span><span class="s1">&#39;https://example.com&#39;</span><span class="p">))</span>

<span class="c1"># Results in:</span>
<span class="c1"># b&#39;&lt;!doctype html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Example Domain&lt;/title&gt;\n\n</span>
</pre></div>
</div>
<p>Making one request in an async program is a little weird, but not without its use. This sort of basic <code class="docutils literal"><span class="pre">asks.get()</span></code> would slot in quite nicely in a greater program that makes some calls here and there.</p>
</div>
<div class="section" id="a-far-finer-example">
<h2>A far finer example:<a class="headerlink" href="#a-far-finer-example" title="Permalink to this headline">¶</a></h2>
<p>Here&#8217;s an example of making 1000 calls to an api and storing the results in a list:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># many_get.py</span>
<span class="c1"># make a whole pile of api calls and store</span>
<span class="c1"># their response objects in a list.</span>
<span class="c1"># Using the homogeneous-session.</span>

<span class="kn">import</span> <span class="nn">asks</span>
<span class="kn">import</span> <span class="nn">curio</span>

<span class="n">path_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="s1">&#39;of&#39;</span><span class="p">,</span> <span class="s1">&#39;1000&#39;</span><span class="p">,</span> <span class="s1">&#39;paths&#39;</span><span class="p">]</span>

<span class="n">retrieved_responses</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">asks</span><span class="o">.</span><span class="n">HSession</span><span class="p">(</span><span class="s1">&#39;https://some-web-service.com&#39;</span><span class="p">,</span>
                  <span class="n">connections</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">grabber</span><span class="p">(</span><span class="n">a_path</span><span class="p">):</span>
    <span class="n">r</span> <span class="o">=</span> <span class="k">await</span> <span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">a_path</span><span class="p">)</span>
    <span class="n">retrieved_responses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">path_list</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">path_list</span><span class="p">:</span>
        <span class="n">curio</span><span class="o">.</span><span class="n">spawn</span><span class="p">(</span><span class="n">grabber</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>

<span class="n">curio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">(</span><span class="n">path_list</span><span class="p">))</span>
</pre></div>
</div>
<p>Now we&#8217;re talkin&#8217;.</p>
<p>A thousand requests running async at the drop of a hat, using clean burning connection pooling to play nicely with the target server.</p>
</div>
<div class="section" id="why-asks">
<h2>Why asks?<a class="headerlink" href="#why-asks" title="Permalink to this headline">¶</a></h2>
<p>If you like async, but don&#8217;t like the spaghetti-docs furture-laden many-looped asyncio lib, you&#8217;ll probably love curio. If you wish you could marry curio and requests, you&#8217;ll probably love asks.</p>
<p>Nice libs like aiohttp suffer the side effect of uglyness due to being specifically for asyncio. Inspired by requests and curio, I wanted to take that lovely ultra abstraction and apply it to an async http lib to eleviate some of the pain in dealing with async http.</p>
</div>
<div class="section" id="features">
<h2>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<p>asks packs most if not all of the features requests does. The usual <code class="docutils literal"><span class="pre">.json()</span></code> ing of responses and such. You can take a more in depth look <a class="reference external" href="https://asks.readthedocs.io/en/latest/overview-of-funcs-and-args.html">here</a>.</p>
<p>However, because asks is aimed at crunching large piles of requests it takes a different approach to sessions. Sessions in asks are the main focus. More detail can be found <a class="reference external" href="https://asks.readthedocs.io/en/latest/a-look-at-sessions.html">here</a></p>
</div>
<div class="section" id="the-future">
<h2>The Future<a class="headerlink" href="#the-future" title="Permalink to this headline">¶</a></h2>
<p>As soon as <a class="reference external" href="https://github.com/python-trio/trio">trio</a> supports async file i/o, asks will be available for trio too :)</p>
</div>
<div class="section" id="contributing">
<h2>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline">¶</a></h2>
<p>Contributions are very welcome :)</p>
</div>
<div class="section" id="about">
<h2>About<a class="headerlink" href="#about" title="Permalink to this headline">¶</a></h2>
<p>asks was created by Mark Jameson</p>
<p><a class="reference external" href="http://theelous3.net">http://theelous3.net</a></p>
<p>Shoutout to the fine folks of <a class="reference external" href="https://github.com/8Banana">8banana</a> and co.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">asks</a><ul>
<li><a class="reference internal" href="#contents">Contents:</a></li>
<li><a class="reference internal" href="#what-is-asks">What is asks?</a></li>
<li><a class="reference internal" href="#installation">Installation:</a></li>
<li><a class="reference internal" href="#a-dirty-little-example">A dirty little example:</a></li>
<li><a class="reference internal" href="#a-far-finer-example">A far finer example:</a></li>
<li><a class="reference internal" href="#why-asks">Why asks?</a></li>
<li><a class="reference internal" href="#features">Features</a></li>
<li><a class="reference internal" href="#the-future">The Future</a></li>
<li><a class="reference internal" href="#contributing">Contributing</a></li>
<li><a class="reference internal" href="#about">About</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
      <li>Next: <a href="overview-of-funcs-and-args.html" title="next chapter">asks - An overview of the functions and kw/argumetns.</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Mark Jameson.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>